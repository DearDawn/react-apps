<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1,user-scalable=no">
  <link rel="shortcut icon" href="/src/assets/sugar.ico" type="image/x-icon">
  <link rel="manifest" href="./manifest.json">

  <title>小项目</title>
  <link rel="stylesheet" href="../assets/styles.less" />
</head>

<body>
  <div id="app"></div>
  <script type="module" src="./index.tsx"></script>
  <script src="//unpkg.com/version-polling/dist/version-polling.min.js"></script>
  <script>
    VersionPolling.createVersionPolling({
      appETagKey: "__APP_ETAG__",
      pollingInterval: 5 * 1000,
      onUpdate: (self) => {
        // 当检测到有新版本时，执行的回调函数，可以在这里提示用户刷新页面
        const result = confirm("页面有更新，点击确定刷新页面！");
        if (result) {
          self.onRefresh();
        } else {
          self.onCancel();
        }
      },
    });
  </script>
</body>

</html>